"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[497],{4453:function(e,o,r){r.d(o,{l:function(){return t}});var n=r(3464),s=r(4131);r(257);let t=()=>"https://api.inde.kr",l=n.Z.create({baseURL:t(),headers:{"Content-Type":"application/json"},withCredentials:!0}),i=e=>{if(!e)return!1;let o=e.replace(t(),"").split("?")[0].replace(/^https?:\/\/[^/]+/,"")||e;return/^\/api\/(notices|faqs)(\/|$)/.test(o)};l.interceptors.request.use(e=>{if(i(e.url))return e;let o=s.Z.get("accessToken");return o&&e.headers&&(e.headers.Authorization="Bearer ".concat(o)),e},e=>Promise.reject(e)),l.interceptors.response.use(e=>e,async e=>{var o;return(null===(o=e.response)||void 0===o?void 0:o.status)!==401||(s.Z.remove("accessToken"),s.Z.remove("refreshToken"),s.Z.remove("userInfo"),window.location.pathname.includes("/login")||(window.location.href="/login?error=UNAUTHORIZED")),Promise.reject(e)}),o.Z=l},767:function(e,o,r){r.d(o,{OF:function(){return u},S:function(){return v},Y0:function(){return a},lj:function(){return p},pz:function(){return l},up:function(){return i},xX:function(){return t}});var n=r(4453);let s="sysCodeData",t=["SYS26209B002","SYS26127B017","SYS26127B018","SYS26127B019","SYS26127B006","SYS26209B020","SYS26209B015"],l="SYS26127B018",i="SYS26127B019",u="SYS26127B006",a=e=>{try{let o=localStorage.getItem(s);if(!o)return null;let r=JSON.parse(o);if(Date.now()-r.timestamp>864e5)return localStorage.removeItem(s),null;return r[e]||null}catch(e){return console.error("syscode 캐시 읽기 오류:",e),null}},d=(e,o)=>{try{let r=localStorage.getItem(s),n={timestamp:Date.now()};if(r){let e=JSON.parse(r);Date.now()-e.timestamp<=864e5&&((n=e).timestamp=Date.now())}n[e]=o,localStorage.setItem(s,JSON.stringify(n))}catch(e){console.error("syscode 캐시 저장 오류:",e)}},c=async e=>{try{var o,r,s;let t=await n.Z.get("/systemmanage/syscode/by_parent/",{params:{parent_id:e}}),l=[];if((null===(r=t.data)||void 0===r?void 0:null===(o=r.IndeAPIResponse)||void 0===o?void 0:o.ErrorCode)==="00")l=t.data.IndeAPIResponse.Result||[];else if(Array.isArray(t.data))l=t.data;else{if(!((null===(s=t.data)||void 0===s?void 0:s.results)&&Array.isArray(t.data.results)))return[];l=t.data.results}return l.map(e=>{var o,r,n,s,t,l,i,u;return{sysCodeSid:String(null!==(o=e.sysCodeSid)&&void 0!==o?o:""),sysCodeName:String(null!==(r=e.sysCodeName)&&void 0!==r?r:""),sysCodeValue:String(null!==(t=null!==(s=null!==(n=e.sysCodeVal)&&void 0!==n?n:e.sysCodeValue)&&void 0!==s?s:e.sysCodeSid)&&void 0!==t?t:""),sysCodeSort:Number(null!==(l=e.sysCodeSort)&&void 0!==l?l:0),sysCodeUseFlag:String(null!==(u=null!==(i=e.sysCodeUse)&&void 0!==i?i:e.sysCodeUseFlag)&&void 0!==u?u:"Y")}})}catch(o){return console.error("syscode by_parent API 오류 (".concat(e,"):"),o),[]}},v=async e=>{try{let o=await c(e);o.length>0&&d(e,o)}catch(o){console.error("로그인 시 시스템 코드 로드 실패 (".concat(e,"):"),o)}},p=async()=>{try{let e=a(t[0]);if(e&&e.length>0)return;for(let e of t)await v(e)}catch(e){console.error("sysCode 초기 로드 실패:",e)}}},9636:function(e,o,r){r.d(o,{$8:function(){return m},A8:function(){return f},Fm:function(){return c},bG:function(){return v},ck:function(){return a},hP:function(){return y},jo:function(){return i},kS:function(){return d},lm:function(){return p},mS:function(){return u},x4:function(){return t},z2:function(){return l}});var n=r(4453),s=r(4131);let t=async e=>{var o,r,s,t,l,i,u,a,d,v,p,f;try{let s=(await n.Z.post("/auth/login/",e)).data,t=null!==(r=null==s?void 0:null===(o=s.IndeAPIResponse)||void 0===o?void 0:o.Result)&&void 0!==r?r:(null==s?void 0:s.access_token)&&(null==s?void 0:s.user)?s:null;if((null==t?void 0:t.access_token)&&(null==t?void 0:t.user))return c(t.access_token,t.refresh_token,t.user),t;if((null==s?void 0:s.IndeAPIResponse)&&"00"!==s.IndeAPIResponse.ErrorCode)throw Error(s.IndeAPIResponse.Message||"로그인에 실패했습니다.");throw Error("응답 형식이 올바르지 않습니다.")}catch(e){throw console.error("로그인 API 오류:",e),Error(null!==(f=null!==(p=null!==(v=null===(l=e.response)||void 0===l?void 0:null===(t=l.data)||void 0===t?void 0:null===(s=t.IndeAPIResponse)||void 0===s?void 0:s.Message)&&void 0!==v?v:null===(u=e.response)||void 0===u?void 0:null===(i=u.data)||void 0===i?void 0:i.error)&&void 0!==p?p:null===(d=e.response)||void 0===d?void 0:null===(a=d.data)||void 0===a?void 0:a.message)&&void 0!==f?f:e instanceof Error?e.message:"로그인에 실패했습니다.")}},l=async e=>{var o,r,s,t,l,i,u,a,d,v,p,f,y,m,g,I,h,S,R;try{let u=(await n.Z.post("/auth/register/",e)).data,a=null!==(t=null!==(s=u&&"IndeAPIResponse"in u&&(null===(o=u.IndeAPIResponse)||void 0===o?void 0:o.Result))&&void 0!==s?s:u&&"object"==typeof u&&"Result"in u?u.Result:null)&&void 0!==t?t:u;if((null==a?void 0:a.success)&&(null==a?void 0:a.email))return{success:!0,message:a.message||"",email:a.email,user:a.user};if((null==a?void 0:a.access_token)&&(null==a?void 0:a.user))return c(a.access_token,a.refresh_token||"",a.user),{success:!0,message:"",email:e.email,user:a.user};let d=null!==(i=null!==(l=u&&"IndeAPIResponse"in u?null===(r=u.IndeAPIResponse)||void 0===r?void 0:r.Message:null)&&void 0!==l?l:u&&"object"==typeof u&&"Message"in u?u.Message:null)&&void 0!==i?i:"응답 형식이 올바르지 않습니다.";throw Error(d)}catch(e){throw console.error("회원가입 API 오류:",e),Error(null!==(R=null!==(S=null!==(h=null!==(I=null===(d=e.response)||void 0===d?void 0:null===(a=d.data)||void 0===a?void 0:null===(u=a.IndeAPIResponse)||void 0===u?void 0:u.Message)&&void 0!==I?I:null===(p=e.response)||void 0===p?void 0:null===(v=p.data)||void 0===v?void 0:v.Message)&&void 0!==h?h:null===(y=e.response)||void 0===y?void 0:null===(f=y.data)||void 0===f?void 0:f.error)&&void 0!==S?S:null===(g=e.response)||void 0===g?void 0:null===(m=g.data)||void 0===m?void 0:m.message)&&void 0!==R?R:e instanceof Error?e.message:"회원가입에 실패했습니다.")}},i=async()=>{try{var e,o,r;let s=(await n.Z.get("/me/")).data,t=null!==(r=null!==(o=null==s?void 0:null===(e=s.IndeAPIResponse)||void 0===e?void 0:e.Result)&&void 0!==o?o:s&&"Result"in s?s.Result:null)&&void 0!==r?r:s;if(!t||"object"!=typeof t)throw Error("사용자 정보를 불러올 수 없습니다.");return t}catch(e){throw console.error("사용자 정보 조회 API 오류:",e),e}},u=async e=>{try{var o,r,t;let l=(await n.Z.put("/profile/complete/",e)).data,i=null!==(t=null!==(r=null==l?void 0:null===(o=l.IndeAPIResponse)||void 0===o?void 0:o.Result)&&void 0!==r?r:l&&"Result"in l?l.Result:null)&&void 0!==t?t:l;return(null==i?void 0:i.user)&&s.Z.set("userInfo",JSON.stringify(i.user),{expires:1,secure:!0,sameSite:"strict",path:"/"}),i}catch(e){throw console.error("프로필 완성 API 오류:",e),e}},a=async e=>u(e),d=async()=>{try{await n.Z.post("/auth/logout/")}catch(e){console.error("로그아웃 API 오류:",e)}finally{s.Z.remove("accessToken"),s.Z.remove("refreshToken"),s.Z.remove("userInfo"),window.location.href="/login"}},c=(e,o,r)=>{let n={expires:1,secure:!0,sameSite:"strict",path:"/"};s.Z.set("accessToken",e,n),s.Z.set("refreshToken",o,{...n,expires:7}),r&&s.Z.set("userInfo",JSON.stringify(r),n)},v=()=>{let e=s.Z.get("userInfo");if(e)try{return JSON.parse(e)}catch(e){}return null},p=async e=>{var o,r,s,t,l,i,u,a,d,c,v,p,f,y;try{let t=(await n.Z.post("/auth/verify-email/",{token:e})).data,l=null!==(s=null!==(r=t&&"IndeAPIResponse"in t?null===(o=t.IndeAPIResponse)||void 0===o?void 0:o.Result:null)&&void 0!==r?r:t&&"object"==typeof t&&"Result"in t?t.Result:null)&&void 0!==s?s:t;if(l&&l.success)return{success:!0,message:l.message};return{success:!1,error:(null==l?void 0:l.error)||"인증에 실패했습니다."}}catch(e){return{success:!1,error:null!==(y=null!==(f=null!==(p=null===(i=e.response)||void 0===i?void 0:null===(l=i.data)||void 0===l?void 0:null===(t=l.IndeAPIResponse)||void 0===t?void 0:t.Message)&&void 0!==p?p:null===(a=e.response)||void 0===a?void 0:null===(u=a.data)||void 0===u?void 0:u.error)&&void 0!==f?f:null===(v=e.response)||void 0===v?void 0:null===(c=v.data)||void 0===c?void 0:null===(d=c.Result)||void 0===d?void 0:d.error)&&void 0!==y?y:"인증 처리 중 오류가 발생했습니다."}}},f=async e=>{try{let o=(await n.Z.post("/auth/resend-verification-email/",{email:e})).data;if(!1!==o.success&&(o.message||o.success))return{success:!0,message:o.message};return{success:!1,error:o.error||"재발송에 실패했습니다."}}catch(e){var o,r;return{success:!1,error:(null===(r=e.response)||void 0===r?void 0:null===(o=r.data)||void 0===o?void 0:o.error)||"재발송 처리 중 오류가 발생했습니다."}}},y=()=>s.Z.get("accessToken"),m=()=>!!s.Z.get("accessToken")}}]);