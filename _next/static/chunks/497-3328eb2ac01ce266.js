"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[497],{4453:function(e,s,o){o.d(s,{l:function(){return t}});var r=o(3464),n=o(4131);o(257);let t=()=>"https://api.inde.kr",l=r.Z.create({baseURL:t(),headers:{"Content-Type":"application/json"},withCredentials:!0});l.interceptors.request.use(e=>{let s=n.Z.get("accessToken");return s&&e.headers&&(e.headers.Authorization="Bearer ".concat(s)),e},e=>Promise.reject(e)),l.interceptors.response.use(e=>e,async e=>{var s;return(null===(s=e.response)||void 0===s?void 0:s.status)!==401||(n.Z.remove("accessToken"),n.Z.remove("refreshToken"),n.Z.remove("userInfo"),window.location.pathname.includes("/login")||(window.location.href="/login?error=UNAUTHORIZED")),Promise.reject(e)}),s.Z=l},767:function(e,s,o){o.d(s,{OF:function(){return a},S:function(){return y},js:function(){return f},lj:function(){return p},pz:function(){return l},up:function(){return i},xX:function(){return t}});var r=o(4453);let n="sysCodeData",t=["SYS26209B002","SYS26127B017","SYS26127B018","SYS26127B019","SYS26127B006","SYS26209B020","SYS26209B015"],l="SYS26127B018",i="SYS26127B019",a="SYS26127B006",u=e=>{try{let s=localStorage.getItem(n);if(!s)return null;let o=JSON.parse(s);if(Date.now()-o.timestamp>864e5)return localStorage.removeItem(n),null;return o[e]||null}catch(e){return console.error("syscode 캐시 읽기 오류:",e),null}},d=(e,s)=>{try{let o=localStorage.getItem(n),r={timestamp:Date.now()};if(o){let e=JSON.parse(o);Date.now()-e.timestamp<=864e5&&((r=e).timestamp=Date.now())}r[e]=s,localStorage.setItem(n,JSON.stringify(r))}catch(e){console.error("syscode 캐시 저장 오류:",e)}},c=async e=>{try{var s,o,n;let t=await r.Z.get("/systemmanage/syscode/",{params:{sysCodeParentsSid:e}}),l=[];if((null===(o=t.data)||void 0===o?void 0:null===(s=o.IndeAPIResponse)||void 0===s?void 0:s.ErrorCode)==="00")l=t.data.IndeAPIResponse.Result||[];else if(Array.isArray(t.data))l=t.data;else{if(!((null===(n=t.data)||void 0===n?void 0:n.results)&&Array.isArray(t.data.results)))return[];l=t.data.results}return l.map(e=>{var s,o,r,n,t,l,i,a;return{sysCodeSid:String(null!==(s=e.sysCodeSid)&&void 0!==s?s:""),sysCodeName:String(null!==(o=e.sysCodeName)&&void 0!==o?o:""),sysCodeValue:String(null!==(t=null!==(n=null!==(r=e.sysCodeVal)&&void 0!==r?r:e.sysCodeValue)&&void 0!==n?n:e.sysCodeSid)&&void 0!==t?t:""),sysCodeSort:Number(null!==(l=e.sysCodeSort)&&void 0!==l?l:0),sysCodeUseFlag:String(null!==(a=null!==(i=e.sysCodeUse)&&void 0!==i?i:e.sysCodeUseFlag)&&void 0!==a?a:"Y")}})}catch(s){return console.error("syscode API 호출 오류 (".concat(e,"):"),s),[]}},v=async e=>{try{var s,o,n;let t=await r.Z.get("/systemmanage/syscode/by_parent/",{params:{parent_id:e}}),l=[];if((null===(o=t.data)||void 0===o?void 0:null===(s=o.IndeAPIResponse)||void 0===s?void 0:s.ErrorCode)==="00")l=t.data.IndeAPIResponse.Result||[];else if(Array.isArray(t.data))l=t.data;else{if(!((null===(n=t.data)||void 0===n?void 0:n.results)&&Array.isArray(t.data.results)))return[];l=t.data.results}return l.map(e=>{var s,o,r,n,t,l,i,a;return{sysCodeSid:String(null!==(s=e.sysCodeSid)&&void 0!==s?s:""),sysCodeName:String(null!==(o=e.sysCodeName)&&void 0!==o?o:""),sysCodeValue:String(null!==(t=null!==(n=null!==(r=e.sysCodeVal)&&void 0!==r?r:e.sysCodeValue)&&void 0!==n?n:e.sysCodeSid)&&void 0!==t?t:""),sysCodeSort:Number(null!==(l=e.sysCodeSort)&&void 0!==l?l:0),sysCodeUseFlag:String(null!==(a=null!==(i=e.sysCodeUse)&&void 0!==i?i:e.sysCodeUseFlag)&&void 0!==a?a:"Y")}})}catch(s){return console.error("syscode by_parent API 오류 (".concat(e,"):"),s),[]}},y=async e=>{try{let s=await v(e);s.length>0&&d(e,s)}catch(s){console.error("로그인 시 시스템 코드 로드 실패 (".concat(e,"):"),s)}},p=async()=>{try{let e=u(t[0]);if(e&&e.length>0)return;for(let e of t)await y(e)}catch(e){console.error("sysCode 초기 로드 실패:",e)}},f=async e=>{let s=u(e);if(null==s?void 0:s.length)return s;let o=await c(e);return o.length>0&&d(e,o),o}},9636:function(e,s,o){o.d(s,{$8:function(){return m},A8:function(){return p},Fm:function(){return c},bG:function(){return v},ck:function(){return u},hP:function(){return f},jo:function(){return i},kS:function(){return d},lm:function(){return y},mS:function(){return a},x4:function(){return t},z2:function(){return l}});var r=o(4453),n=o(4131);let t=async e=>{var s,o,n,t,l,i,a,u,d,v,y,p;try{let n=(await r.Z.post("/auth/login/",e)).data,t=null!==(o=null==n?void 0:null===(s=n.IndeAPIResponse)||void 0===s?void 0:s.Result)&&void 0!==o?o:(null==n?void 0:n.access_token)&&(null==n?void 0:n.user)?n:null;if((null==t?void 0:t.access_token)&&(null==t?void 0:t.user))return c(t.access_token,t.refresh_token,t.user),t;if((null==n?void 0:n.IndeAPIResponse)&&"00"!==n.IndeAPIResponse.ErrorCode)throw Error(n.IndeAPIResponse.Message||"로그인에 실패했습니다.");throw Error("응답 형식이 올바르지 않습니다.")}catch(e){throw console.error("로그인 API 오류:",e),Error(null!==(p=null!==(y=null!==(v=null===(l=e.response)||void 0===l?void 0:null===(t=l.data)||void 0===t?void 0:null===(n=t.IndeAPIResponse)||void 0===n?void 0:n.Message)&&void 0!==v?v:null===(a=e.response)||void 0===a?void 0:null===(i=a.data)||void 0===i?void 0:i.error)&&void 0!==y?y:null===(d=e.response)||void 0===d?void 0:null===(u=d.data)||void 0===u?void 0:u.message)&&void 0!==p?p:e instanceof Error?e.message:"로그인에 실패했습니다.")}},l=async e=>{var s,o,n,t,l,i,a,u,d,v,y,p,f,m,g,I,S,h,A;try{let a=(await r.Z.post("/auth/register/",e)).data,u=null!==(t=null!==(n=a&&"IndeAPIResponse"in a&&(null===(s=a.IndeAPIResponse)||void 0===s?void 0:s.Result))&&void 0!==n?n:a&&"object"==typeof a&&"Result"in a?a.Result:null)&&void 0!==t?t:a;if((null==u?void 0:u.success)&&(null==u?void 0:u.email))return{success:!0,message:u.message||"",email:u.email,user:u.user};if((null==u?void 0:u.access_token)&&(null==u?void 0:u.user))return c(u.access_token,u.refresh_token||"",u.user),{success:!0,message:"",email:e.email,user:u.user};let d=null!==(i=null!==(l=a&&"IndeAPIResponse"in a?null===(o=a.IndeAPIResponse)||void 0===o?void 0:o.Message:null)&&void 0!==l?l:a&&"object"==typeof a&&"Message"in a?a.Message:null)&&void 0!==i?i:"응답 형식이 올바르지 않습니다.";throw Error(d)}catch(e){throw console.error("회원가입 API 오류:",e),Error(null!==(A=null!==(h=null!==(S=null!==(I=null===(d=e.response)||void 0===d?void 0:null===(u=d.data)||void 0===u?void 0:null===(a=u.IndeAPIResponse)||void 0===a?void 0:a.Message)&&void 0!==I?I:null===(y=e.response)||void 0===y?void 0:null===(v=y.data)||void 0===v?void 0:v.Message)&&void 0!==S?S:null===(f=e.response)||void 0===f?void 0:null===(p=f.data)||void 0===p?void 0:p.error)&&void 0!==h?h:null===(g=e.response)||void 0===g?void 0:null===(m=g.data)||void 0===m?void 0:m.message)&&void 0!==A?A:e instanceof Error?e.message:"회원가입에 실패했습니다.")}},i=async()=>{try{var e,s,o;let n=(await r.Z.get("/me/")).data,t=null!==(o=null!==(s=null==n?void 0:null===(e=n.IndeAPIResponse)||void 0===e?void 0:e.Result)&&void 0!==s?s:n&&"Result"in n?n.Result:null)&&void 0!==o?o:n;if(!t||"object"!=typeof t)throw Error("사용자 정보를 불러올 수 없습니다.");return t}catch(e){throw console.error("사용자 정보 조회 API 오류:",e),e}},a=async e=>{try{var s,o,t;let l=(await r.Z.put("/profile/complete/",e)).data,i=null!==(t=null!==(o=null==l?void 0:null===(s=l.IndeAPIResponse)||void 0===s?void 0:s.Result)&&void 0!==o?o:l&&"Result"in l?l.Result:null)&&void 0!==t?t:l;return(null==i?void 0:i.user)&&n.Z.set("userInfo",JSON.stringify(i.user),{expires:1,secure:!0,sameSite:"strict",path:"/"}),i}catch(e){throw console.error("프로필 완성 API 오류:",e),e}},u=async e=>a(e),d=async()=>{try{await r.Z.post("/auth/logout/")}catch(e){console.error("로그아웃 API 오류:",e)}finally{n.Z.remove("accessToken"),n.Z.remove("refreshToken"),n.Z.remove("userInfo"),window.location.href="/login"}},c=(e,s,o)=>{let r={expires:1,secure:!0,sameSite:"strict",path:"/"};n.Z.set("accessToken",e,r),n.Z.set("refreshToken",s,{...r,expires:7}),o&&n.Z.set("userInfo",JSON.stringify(o),r)},v=()=>{let e=n.Z.get("userInfo");if(e)try{return JSON.parse(e)}catch(e){}return null},y=async e=>{var s,o,n,t,l,i,a,u,d,c,v,y,p,f;try{let t=(await r.Z.post("/auth/verify-email/",{token:e})).data,l=null!==(n=null!==(o=t&&"IndeAPIResponse"in t?null===(s=t.IndeAPIResponse)||void 0===s?void 0:s.Result:null)&&void 0!==o?o:t&&"object"==typeof t&&"Result"in t?t.Result:null)&&void 0!==n?n:t;if(l&&l.success)return{success:!0,message:l.message};return{success:!1,error:(null==l?void 0:l.error)||"인증에 실패했습니다."}}catch(e){return{success:!1,error:null!==(f=null!==(p=null!==(y=null===(i=e.response)||void 0===i?void 0:null===(l=i.data)||void 0===l?void 0:null===(t=l.IndeAPIResponse)||void 0===t?void 0:t.Message)&&void 0!==y?y:null===(u=e.response)||void 0===u?void 0:null===(a=u.data)||void 0===a?void 0:a.error)&&void 0!==p?p:null===(v=e.response)||void 0===v?void 0:null===(c=v.data)||void 0===c?void 0:null===(d=c.Result)||void 0===d?void 0:d.error)&&void 0!==f?f:"인증 처리 중 오류가 발생했습니다."}}},p=async e=>{try{let s=(await r.Z.post("/auth/resend-verification-email/",{email:e})).data;if(!1!==s.success&&(s.message||s.success))return{success:!0,message:s.message};return{success:!1,error:s.error||"재발송에 실패했습니다."}}catch(e){var s,o;return{success:!1,error:(null===(o=e.response)||void 0===o?void 0:null===(s=o.data)||void 0===s?void 0:s.error)||"재발송 처리 중 오류가 발생했습니다."}}},f=()=>n.Z.get("accessToken"),m=()=>!!n.Z.get("accessToken")}}]);