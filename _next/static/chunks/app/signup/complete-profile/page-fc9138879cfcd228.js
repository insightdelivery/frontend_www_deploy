(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[899],{1280:function(e,a,s){Promise.resolve().then(s.bind(s,7178))},7178:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return g}});var r=s(7437),t=s(2265),n=s(9376),i=s(9501),l=s(3590),m=s(7119),o=s(9636),c=s(2381),d=s(279),h=s(5060),x=s(1131),u=s(9210);let p=m.G0([m.Rx(),m.qn()]).transform(e=>null==e||Number.isNaN(e)?void 0:e),_=m.Ry({name:m.Z_().min(1,"이름을 입력해 주세요."),nickname:m.Z_().min(1,"닉네임을 입력해 주세요."),phone:m.Z_().min(1,"휴대폰 번호를 입력해 주세요."),age_agree:m.O7().refine(e=>!0===e,{message:"만 14세 이상 동의가 필요합니다."}),terms_agree:m.O7().refine(e=>!0===e,{message:"이용약관 동의가 필요합니다."}),privacy_agree:m.O7().refine(e=>!0===e,{message:"개인정보 수집\xb7이용 동의가 필요합니다."}),newsletter_agree:m.O7().optional(),terms_all_agree:m.O7().optional(),position:m.Z_().optional(),birth_year:p,birth_month:p,birth_day:p,region:m.Z_().optional(),is_overseas:m.O7().optional()});function g(){let e=(0,n.useRouter)(),[a,s]=(0,t.useState)(!0),[m,p]=(0,t.useState)(!1),[g,b]=(0,t.useState)(null),[y,v]=(0,t.useState)(""),{register:N,handleSubmit:f,formState:{errors:j},watch:k,setValue:w}=(0,i.cI)({resolver:(0,l.F)(_),defaultValues:{age_agree:!1,terms_agree:!1,privacy_agree:!1,newsletter_agree:!1,terms_all_agree:!1,is_overseas:!1}});(0,t.useEffect)(()=>{let a=!0;return(0,o.jo)().then(s=>{if(a){if(s.profile_completed){e.replace("/");return}v(s.email||""),s.name&&w("name",s.name),s.nickname&&w("nickname",s.nickname),s.phone&&w("phone",s.phone)}}).catch(()=>{a&&e.replace("/login")}).finally(()=>{a&&s(!1)}),()=>{a=!1}},[e,w]);let O=async a=>{p(!0),b(null);try{let s=a.birth_year&&Number(a.birth_year)?Number(a.birth_year):void 0,r=a.birth_month&&Number(a.birth_month)?Number(a.birth_month):void 0,t=a.birth_day&&Number(a.birth_day)?Number(a.birth_day):void 0;await (0,o.mS)({email:y,name:a.name,nickname:a.nickname,phone:a.phone,position:a.position||"",birth_year:s,birth_month:r,birth_day:t,region_type:a.is_overseas?"FOREIGN":"DOMESTIC",region_domestic:a.is_overseas?void 0:a.region||"",region_foreign:a.is_overseas?a.region||"":void 0,newsletter_agree:a.newsletter_agree}),e.replace("/")}catch(e){var s,r,t,n,i,l,m;b(null!==(m=null!==(l=null!==(i=null===(r=e.response)||void 0===r?void 0:null===(s=r.data)||void 0===s?void 0:s.error)&&void 0!==i?i:null===(n=e.response)||void 0===n?void 0:null===(t=n.data)||void 0===t?void 0:t.message)&&void 0!==l?l:e.message)&&void 0!==m?m:"저장에 실패했습니다.")}finally{p(!1)}};return a?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})}):(0,r.jsxs)("div",{className:"min-h-screen flex flex-col bg-white",children:[(0,r.jsxs)("main",{className:"flex-1 w-full max-w-md mx-auto px-4 py-10",children:[(0,r.jsx)("h1",{className:"text-center text-2xl font-bold text-gray-900 mb-6",children:"부가 정보 입력"}),(0,r.jsx)("p",{className:"text-center text-sm text-gray-600 mb-8",children:"서비스 이용을 위해 아래 정보를 입력해 주세요."}),(0,r.jsxs)("form",{onSubmit:f(O),className:"space-y-5",children:[g&&(0,r.jsx)("div",{className:"rounded-md bg-red-50 p-4",children:(0,r.jsx)("p",{className:"text-sm text-red-800",children:g})}),(0,r.jsxs)("div",{children:[(0,r.jsx)(h._,{htmlFor:"email",className:"text-gray-900",children:"이메일"}),(0,r.jsx)(d.I,{id:"email",type:"email",value:y,readOnly:!0,disabled:!0,className:"mt-1 bg-gray-100 text-gray-600"}),(0,r.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"이메일은 수정할 수 없습니다."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(h._,{htmlFor:"name",className:"text-gray-900",children:"이름 *"}),(0,r.jsx)(d.I,{id:"name",type:"text",placeholder:"이름",...N("name"),className:"mt-1"}),j.name&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:j.name.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(h._,{htmlFor:"nickname",className:"text-gray-900",children:"닉네임 *"}),(0,r.jsx)(d.I,{id:"nickname",type:"text",placeholder:"닉네임",...N("nickname"),className:"mt-1"}),j.nickname&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:j.nickname.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(h._,{htmlFor:"phone",className:"text-gray-900",children:"휴대폰 번호 *"}),(0,r.jsxs)("div",{className:"flex gap-2 mt-1",children:[(0,r.jsx)(d.I,{id:"phone",type:"tel",placeholder:"- 생략하고 입력",...N("phone"),className:"flex-1"}),(0,r.jsx)(c.z,{type:"button",variant:"outline",className:"flex-shrink-0 border-gray-300",disabled:!0,children:"인증번호 전송"})]}),j.phone&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:j.phone.message})]}),(0,r.jsx)(u.r,{register:N,errors:j,watch:k,setValue:w}),(0,r.jsx)(c.z,{type:"submit",className:"w-full bg-amber-400 hover:bg-amber-500 text-gray-900",disabled:m,children:m?"등록 중...":"회원가입"})]})]}),(0,r.jsx)(x.Z,{})]})}}},function(e){e.O(0,[825,137,944,497,443,971,117,744],function(){return e(e.s=1280)}),_N_E=e.O()}]);