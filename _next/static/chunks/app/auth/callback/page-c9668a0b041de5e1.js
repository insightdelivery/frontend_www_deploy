(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[453],{976:function(e,r,t){Promise.resolve().then(t.bind(t,9838))},9838:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return c}});var n=t(7437),s=t(2265),a=t(9376),o=t(1323);function c(){let e=(0,a.useRouter)(),[r,t]=(0,s.useState)("loading");return((0,s.useEffect)(()=>{(async()=>{try{(await (0,o.jo)()).profile_completed?e.push("/"):e.push("/signup/complete")}catch(r){console.error("콜백 처리 오류:",r),t("error"),setTimeout(()=>{e.push("/login?error=OAUTH_FAILED")},2e3)}})()},[e]),"error"===r)?(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("p",{className:"text-red-600",children:"소셜 로그인 처리 중 오류가 발생했습니다."}),(0,n.jsx)("p",{className:"text-sm text-gray-600 mt-2",children:"로그인 페이지로 이동합니다..."})]})}):(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),(0,n.jsx)("p",{className:"mt-4 text-gray-600",children:"로그인 처리 중..."})]})})}},1323:function(e,r,t){"use strict";t.d(r,{mS:function(){return l},jo:function(){return u},bG:function(){return p},$8:function(){return m},x4:function(){return c},kS:function(){return d},z2:function(){return i},ck:function(){return h}});var n=t(3464),s=t(4131),a=t(257);let o=n.Z.create({baseURL:a.env.NEXT_PUBLIC_API_URL||"https://api.inde.kr",headers:{"Content-Type":"application/json"},withCredentials:!0});o.interceptors.request.use(e=>{let r=s.Z.get("accessToken");return r&&e.headers&&(e.headers.Authorization="Bearer ".concat(r)),e},e=>Promise.reject(e)),o.interceptors.response.use(e=>e,async e=>{var r;return(null===(r=e.response)||void 0===r?void 0:r.status)!==401||(s.Z.remove("accessToken"),s.Z.remove("refreshToken"),s.Z.remove("userInfo"),window.location.pathname.includes("/login")||(window.location.href="/login?error=UNAUTHORIZED")),Promise.reject(e)});let c=async e=>{try{let r=await o.post("/auth/login/",e);return r.data.access_token&&r.data.refresh_token&&f(r.data.access_token,r.data.refresh_token,r.data.user),r.data}catch(e){throw console.error("로그인 API 오류:",e),e}},i=async e=>{try{return(await o.post("/auth/register/",e)).data}catch(e){throw console.error("회원가입 API 오류:",e),e}},u=async()=>{try{return(await o.get("/me/")).data}catch(e){throw console.error("사용자 정보 조회 API 오류:",e),e}},l=async e=>{try{let r=await o.put("/profile/complete/",e);return r.data.user&&s.Z.set("userInfo",JSON.stringify(r.data.user),{expires:1,secure:!0,sameSite:"strict",path:"/"}),r.data}catch(e){throw console.error("프로필 완성 API 오류:",e),e}},h=async e=>l(e),d=async()=>{try{await o.post("/auth/logout/")}catch(e){console.error("로그아웃 API 오류:",e)}finally{s.Z.remove("accessToken"),s.Z.remove("refreshToken"),s.Z.remove("userInfo"),window.location.href="/login"}},f=(e,r,t)=>{let n={expires:1,secure:!0,sameSite:"strict",path:"/"};s.Z.set("accessToken",e,n),s.Z.set("refreshToken",r,{...n,expires:7}),t&&s.Z.set("userInfo",JSON.stringify(t),n)},p=()=>{let e=s.Z.get("userInfo");if(e)try{return JSON.parse(e)}catch(e){}return null},m=()=>!!s.Z.get("accessToken")}},function(e){e.O(0,[35,971,117,744],function(){return e(e.s=976)}),_N_E=e.O()}]);