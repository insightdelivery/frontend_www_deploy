(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[386],{8841:function(e,t,n){Promise.resolve().then(n.bind(n,7436))},7436:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return w}});var s=n(7437),i=n(2265),r=n(9376),l=n(7648),a=n(9501),o=n(3590),c=n(7119),d=n(1649),u=n(9636),x=n(9820),f=n(2381),m=n(279),g=n(5060),p=n(5015),h=n(4603),b=n(3676),v=n(3448);let y=e=>{let{editor:t}=e;return t?(0,s.jsxs)("div",{className:"flex flex-wrap gap-1 border-b border-gray-200 p-2",children:[(0,s.jsx)("button",{type:"button",onClick:()=>t.chain().focus().toggleBold().run(),className:(0,v.cn)("rounded px-2 py-1 text-sm font-medium",t.isActive("bold")?"bg-gray-200":"hover:bg-gray-100"),children:"B"}),(0,s.jsx)("button",{type:"button",onClick:()=>t.chain().focus().toggleItalic().run(),className:(0,v.cn)("rounded px-2 py-1 text-sm italic",t.isActive("italic")?"bg-gray-200":"hover:bg-gray-100"),children:"I"}),(0,s.jsx)("button",{type:"button",onClick:()=>t.chain().focus().toggleHeading({level:1}).run(),className:(0,v.cn)("rounded px-2 py-1 text-sm",t.isActive("heading",{level:1})?"bg-gray-200":"hover:bg-gray-100"),children:"H1"}),(0,s.jsx)("button",{type:"button",onClick:()=>t.chain().focus().toggleHeading({level:2}).run(),className:(0,v.cn)("rounded px-2 py-1 text-sm",t.isActive("heading",{level:2})?"bg-gray-200":"hover:bg-gray-100"),children:"H2"}),(0,s.jsx)("button",{type:"button",onClick:()=>t.chain().focus().toggleHeading({level:3}).run(),className:(0,v.cn)("rounded px-2 py-1 text-sm",t.isActive("heading",{level:3})?"bg-gray-200":"hover:bg-gray-100"),children:"H3"})]}):null};var j=function(e){let{content:t="",onChange:n,placeholder:r="내용을 입력하세요…",className:l,editable:a=!0}=e,o=(0,p.jE)({extensions:[h.Z.configure({heading:{levels:[1,2,3]}}),b.ZP.configure({inline:!1,allowBase64:!0})],content:t,editable:a,editorProps:{attributes:{class:"prose prose-sm max-w-none min-h-[200px] px-3 py-2 focus:outline-none"}}});return(0,i.useEffect)(()=>{if(!o)return;let e=()=>null==n?void 0:n(o.getHTML());return o.on("update",e),()=>{o.off("update",e)}},[o,n]),(0,i.useEffect)(()=>{o&&"<p></p>"===o.getHTML()&&t&&o.commands.setContent(t,!1)},[o]),(0,s.jsxs)("div",{className:(0,v.cn)("rounded-md border border-gray-300 bg-white",l),children:[(0,s.jsx)(y,{editor:o}),(0,s.jsx)(p.kg,{editor:o})]})},N=n(1131);let _=c.Ry({title:c.Z_().min(1,"제목을 입력하세요.").max(255,"제목은 255자 이내로 입력하세요."),content:c.Z_().min(1,"내용을 입력하세요."),is_pinned:c.O7().optional()});function w(){let e=(0,r.useRouter)(),[t,n]=(0,i.useState)(null),[c,p]=(0,i.useState)(""),[h,b]=(0,i.useState)(!1),v=(0,u.bG)(),y=!!(null==v?void 0:v.is_staff),{register:w,handleSubmit:k,setValue:C,formState:{errors:H,isSubmitting:E}}=(0,a.cI)({resolver:(0,o.F)(_),defaultValues:{title:"",content:"",is_pinned:!1}});(0,i.useEffect)(()=>{b(!0),(null==v?void 0:v.is_staff)||e.replace("/notice")},[e,null==v?void 0:v.is_staff]),(0,i.useEffect)(()=>{C("content",c,{shouldValidate:!0})},[c,C]);let I=async t=>{n(null);try{let n=await (0,d.iI)({title:t.title,content:c||t.content,is_pinned:t.is_pinned});e.push("/notice?id=".concat(n.id))}catch(t){var s,i;(null===(s=t.response)||void 0===s?void 0:s.status)===401?e.replace("/login"):n(null!==(i=null==t?void 0:t.message)&&void 0!==i?i:"공지 등록에 실패했습니다.")}};return h&&y?(0,s.jsxs)("main",{className:"min-h-screen bg-white",children:[(0,s.jsxs)("div",{className:"mx-auto max-w-[800px] px-4 sm:px-6 py-8 sm:py-12",children:[(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsx)(l.default,{href:"/notice",className:"text-sm text-gray-500 hover:text-gray-900",children:"← 공지사항 목록"})}),(0,s.jsx)("h1",{className:"text-2xl font-black text-gray-900",children:"공지 작성"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"관리자만 작성할 수 있습니다."}),(0,s.jsxs)(x.Zb,{className:"mt-6",children:[(0,s.jsx)(x.Ol,{className:"pb-2",children:(0,s.jsx)(x.ll,{className:"text-lg",children:"새 공지"})}),(0,s.jsx)(x.aY,{children:(0,s.jsxs)("form",{onSubmit:k(I),className:"space-y-4",children:[t&&(0,s.jsx)("div",{className:"rounded-md bg-red-50 p-3 text-sm text-red-800",children:t}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(g._,{htmlFor:"title",children:"제목"}),(0,s.jsx)(m.I,{id:"title",...w("title"),placeholder:"제목 (1~255자)",maxLength:255,className:H.title?"border-red-500":""}),H.title&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:H.title.message})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(g._,{children:"내용 (HTML)"}),(0,s.jsx)(j,{content:c,onChange:e=>{p(e),C("content",e,{shouldValidate:!0})},placeholder:"내용을 입력하세요."}),H.content&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:H.content.message})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"checkbox",id:"is_pinned",...w("is_pinned"),className:"h-4 w-4 rounded border-gray-300"}),(0,s.jsx)(g._,{htmlFor:"is_pinned",className:"font-normal",children:"상단 고정"})]}),(0,s.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,s.jsx)(f.z,{type:"submit",disabled:E,children:E?"등록 중…":"등록"}),(0,s.jsx)(f.z,{type:"button",variant:"outline",asChild:!0,children:(0,s.jsx)(l.default,{href:"/notice",children:"취소"})})]})]})})]})]}),(0,s.jsx)(N.Z,{})]}):(0,s.jsxs)("main",{className:"min-h-screen bg-white",children:[(0,s.jsx)("div",{className:"mx-auto max-w-[720px] px-4 py-12",children:(0,s.jsx)("p",{className:"text-gray-500",children:"권한을 확인하는 중…"})}),(0,s.jsx)(N.Z,{})]})}},2381:function(e,t,n){"use strict";n.d(t,{z:function(){return c}});var s=n(7437),i=n(2265),r=n(5293),l=n(535),a=n(3448);let o=(0,l.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=i.forwardRef((e,t)=>{let{className:n,variant:i,size:l,asChild:c=!1,...d}=e,u=c?r.g7:"button";return(0,s.jsx)(u,{className:(0,a.cn)(o({variant:i,size:l,className:n})),ref:t,...d})});c.displayName="Button"},279:function(e,t,n){"use strict";n.d(t,{I:function(){return l}});var s=n(7437),i=n(2265),r=n(3448);let l=i.forwardRef((e,t)=>{let{className:n,type:i,...l}=e;return(0,s.jsx)("input",{type:i,className:(0,r.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:t,...l})});l.displayName="Input"},5060:function(e,t,n){"use strict";n.d(t,{_:function(){return c}});var s=n(7437),i=n(2265),r=n(1107),l=n(535),a=n(3448);let o=(0,l.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=i.forwardRef((e,t)=>{let{className:n,...i}=e;return(0,s.jsx)(r.f,{ref:t,className:(0,a.cn)(o(),n),...i})});c.displayName=r.f.displayName}},function(e){e.O(0,[572,902,972,825,137,944,569,100,971,117,744],function(){return e(e.s=8841)}),_N_E=e.O()}]);