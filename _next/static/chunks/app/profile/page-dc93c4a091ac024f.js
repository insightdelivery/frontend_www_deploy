(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[178],{3425:function(e,s,i){Promise.resolve().then(i.bind(i,1380))},1380:function(e,s,i){"use strict";i.r(s),i.d(s,{default:function(){return g}});var t=i(7437),n=i(2265),r=i(9376),a=i(9501),l=i(3590),m=i(7119),o=i(9636),d=i(2381),c=i(279),x=i(6220);let h=m.Ry({phone:m.Z_().min(1,"핸드폰 번호를 입력해주세요."),name:m.Z_().min(1,"이름을 입력해주세요."),nickname:m.Z_().min(1,"닉네임을 입력해주세요."),position:m.Z_().min(1,"직분을 입력해주세요."),birth_year:m.Rx().min(1900).max(new Date().getFullYear()),birth_month:m.Rx().min(1).max(12),birth_day:m.Rx().min(1).max(31),region_type:m.Km(["DOMESTIC","FOREIGN"]),region_domestic:m.Z_().optional(),region_foreign:m.Z_().optional()}),p=["서울특별시","부산광역시","대구광역시","인천광역시","광주광역시","대전광역시","울산광역시","세종특별자치시","경기도","강원도","충청북도","충청남도","전라북도","전라남도","경상북도","경상남도","제주특별자치도"];function g(){let e=(0,r.useRouter)(),[s,i]=(0,n.useState)(!1),[m,g]=(0,n.useState)(!0),[u,_]=(0,n.useState)(null),[j,b]=(0,n.useState)(""),[y,f]=(0,n.useState)(""),{register:N,handleSubmit:v,watch:k,reset:I,formState:{errors:w}}=(0,a.cI)({resolver:(0,l.F)(h)}),O=k("region_type");(0,n.useEffect)(()=>{if(!(0,o.$8)()){e.push("/login");return}(async()=>{try{let e=await (0,o.jo)();b(e.email),f(e.joined_via||"LOCAL"),I({phone:e.phone||"",name:e.name||"",nickname:e.nickname||"",position:e.position||"",birth_year:e.birth_year||new Date().getFullYear()-30,birth_month:e.birth_month||1,birth_day:e.birth_day||1,region_type:e.region_type||"DOMESTIC",region_domestic:e.region_domestic||"",region_foreign:e.region_foreign||""})}catch(s){console.error("사용자 정보 조회 오류:",s),e.push("/login")}finally{g(!1)}})()},[e,I]);let E=async e=>{i(!0),_(null);try{let s={email:j,phone:e.phone,name:e.name,nickname:e.nickname,position:e.position,birth_year:e.birth_year,birth_month:e.birth_month,birth_day:e.birth_day,region_type:e.region_type,..."DOMESTIC"===e.region_type?{region_domestic:e.region_domestic||"",region_foreign:""}:{region_foreign:e.region_foreign||"",region_domestic:""}};await (0,o.ck)(s),alert("프로필이 성공적으로 수정되었습니다."),window.location.reload()}catch(e){var s,t;_((null===(t=e.response)||void 0===t?void 0:null===(s=t.data)||void 0===s?void 0:s.message)||e.message||"프로필 수정에 실패했습니다.")}finally{i(!1)}},S=async()=>{confirm("로그아웃 하시겠습니까?")&&await (0,o.kS)()};return m?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),(0,t.jsx)("p",{className:"mt-4 text-gray-600",children:"사용자 정보를 불러오는 중..."})]})}):(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 px-4 py-12",children:(0,t.jsxs)("div",{className:"max-w-2xl mx-auto space-y-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-3xl font-bold tracking-tight text-gray-900",children:"내 정보"}),(0,t.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"회원 정보를 조회하고 수정할 수 있습니다."})]}),(0,t.jsxs)("form",{className:"bg-white rounded-lg shadow p-6 space-y-6",onSubmit:v(E),children:[u&&(0,t.jsx)("div",{className:"rounded-md bg-red-50 p-4",children:(0,t.jsx)("p",{className:"text-sm text-red-800",children:u})}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(x._,{htmlFor:"email",children:"이메일"}),(0,t.jsx)(c.I,{id:"email",type:"email",value:j,disabled:!0,className:"mt-1 bg-gray-100"}),(0,t.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"이메일은 변경할 수 없습니다."})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(x._,{htmlFor:"joined_via",children:"가입 방법"}),(0,t.jsx)(c.I,{id:"joined_via",type:"text",value:{LOCAL:"일반 가입",KAKAO:"카카오",NAVER:"네이버",GOOGLE:"구글"}[y]||"일반 가입",disabled:!0,className:"mt-1 bg-gray-100"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(x._,{htmlFor:"phone",children:"핸드폰"}),(0,t.jsx)(c.I,{id:"phone",type:"tel",placeholder:"010-1234-5678",...N("phone"),className:"mt-1"}),w.phone&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:w.phone.message})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(x._,{htmlFor:"name",children:"이름"}),(0,t.jsx)(c.I,{id:"name",type:"text",...N("name"),className:"mt-1"}),w.name&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:w.name.message})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(x._,{htmlFor:"nickname",children:"닉네임"}),(0,t.jsx)(c.I,{id:"nickname",type:"text",...N("nickname"),className:"mt-1"}),w.nickname&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:w.nickname.message})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(x._,{htmlFor:"position",children:"직분 (교회 직분)"}),(0,t.jsx)(c.I,{id:"position",type:"text",placeholder:"예: 목사, 전도사, 장로 등",...N("position"),className:"mt-1"}),w.position&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:w.position.message})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(x._,{children:"생일"}),(0,t.jsxs)("div",{className:"mt-1 grid grid-cols-3 gap-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(c.I,{type:"number",placeholder:"년",min:"1900",max:new Date().getFullYear(),...N("birth_year",{valueAsNumber:!0})}),w.birth_year&&(0,t.jsx)("p",{className:"mt-1 text-xs text-red-600",children:w.birth_year.message})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c.I,{type:"number",placeholder:"월",min:"1",max:"12",...N("birth_month",{valueAsNumber:!0})}),w.birth_month&&(0,t.jsx)("p",{className:"mt-1 text-xs text-red-600",children:w.birth_month.message})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c.I,{type:"number",placeholder:"일",min:"1",max:"31",...N("birth_day",{valueAsNumber:!0})}),w.birth_day&&(0,t.jsx)("p",{className:"mt-1 text-xs text-red-600",children:w.birth_day.message})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(x._,{children:"지역"}),(0,t.jsxs)("div",{className:"mt-1 space-y-2",children:[(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsxs)("label",{className:"flex items-center",children:[(0,t.jsx)("input",{type:"radio",value:"DOMESTIC",...N("region_type"),className:"mr-2"}),(0,t.jsx)("span",{className:"text-sm",children:"내국인"})]}),(0,t.jsxs)("label",{className:"flex items-center",children:[(0,t.jsx)("input",{type:"radio",value:"FOREIGN",...N("region_type"),className:"mr-2"}),(0,t.jsx)("span",{className:"text-sm",children:"외국인"})]})]}),"DOMESTIC"===O?(0,t.jsxs)("select",{...N("region_domestic"),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm",children:[(0,t.jsx)("option",{value:"",children:"도/광역시를 선택하세요"}),p.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]}):(0,t.jsx)(c.I,{type:"text",placeholder:"국가/지역을 입력하세요",...N("region_foreign")}),w.region_domestic&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:w.region_domestic.message}),w.region_foreign&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:w.region_foreign.message})]})]})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)(d.z,{type:"submit",className:"flex-1",disabled:s,children:s?"저장 중...":"정보 수정"}),(0,t.jsx)(d.z,{type:"button",variant:"outline",onClick:S,className:"flex-1",children:"로그아웃"})]})]})]})})}},279:function(e,s,i){"use strict";i.d(s,{I:function(){return a}});var t=i(7437),n=i(2265),r=i(3448);let a=n.forwardRef((e,s)=>{let{className:i,type:n,...a}=e;return(0,t.jsx)("input",{type:n,className:(0,r.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",i),ref:s,...a})});a.displayName="Input"}},function(e){e.O(0,[825,137,944,261,971,117,744],function(){return e(e.s=3425)}),_N_E=e.O()}]);